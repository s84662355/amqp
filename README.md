# AMQP 连接池代码说明文档

## 项目简介

本项目是一个基于Go语言实现的AMQP协议连接池工具，主要用于高效管理RabbitMQ消息队列的连接和通道资源。通过连接池机制减少频繁创建/销毁连接的性能开销，同时分离实现了生产者和消费者模块，提供简洁易用的接口和完整的示例代码。
 

## 模块功能详解

### 1. 生产者模块（producer）

#### 核心文件作用
- `channel.go`：定义生产者通道操作接口，封装了AMQP协议的基础操作（如交换机声明、消息发布等），并提供具体实现
- `connection.go`：负责单个AMQP连接的生命周期管理，包括连接创建、断开重连、通道创建等
- `pool.go`：实现连接池核心逻辑，管理多个连接实例，提供任务分发、负载均衡和资源回收功能

#### 主要特性
- 支持配置连接池大小和每个连接的通道数量
- 自动处理连接异常，实现故障自动恢复
- 提供任务提交接口，支持带超时控制的消息发布
- 支持优雅关闭，确保资源正确释放

### 2. 消费者模块（consumer）

#### 核心文件作用
- `channel.go`：定义消费者通道操作接口，封装队列声明、消息订阅、确认等消费相关操作
- `connection.go`：管理消费者连接，支持添加多个消费任务，处理连接断开后的重连逻辑

#### 主要特性
- 支持同时运行多个独立的消费任务
- 自动处理连接和通道异常，保证消费连续性
- 提供消息确认机制接口，支持手动/自动确认模式
- 支持动态添加和移除消费任务

### 3. 示例代码（examples）

提供了生产者和消费者的完整使用示例，包含：
- 连接池初始化配置
- 基本消息发布/消费流程
- 错误处理最佳实践
- 资源释放的正确方式

## 代码格式化规范

项目使用`gofumpt`工具进行代码格式化，确保代码风格一致，执行命令：



## 代码格式化
```shell
 gofumpt -l -w .
```

 